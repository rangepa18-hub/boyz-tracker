<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Boyz Calendar</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<style>
  :root{ --rp:#2196F3; --vr:#9C27B0; }
  body{ font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
        background:linear-gradient(180deg,#f2f7ff,#fff); margin:20px; color:#222; }
  .header{ display:flex;justify-content:center;align-items:center;gap:32px;margin-bottom:8px;}
  .header img{ width:120px;height:120px;object-fit:cover;border-radius:0;box-shadow:0 2px 6px rgba(0,0,0,.2);}
  h1{text-align:center;margin:10px 0;font-weight:500;font-family:"Helvetica Neue",Arial,sans-serif;}
  .legend{display:flex;justify-content:center;gap:60px;margin:12px 0 6px 0;}
  .legend-item{text-align:center;font-weight:700;}
  .legend-paws svg{width:22px;height:22px;}
  .summary{text-align:center;margin:8px 0 10px 0;font-weight:600;}
  .controls{display:flex;justify-content:center;gap:10px;align-items:center;margin:6px 0 6px 0;}
  input[type="month"]{padding:4px 6px;font-size:0.95rem;}
  .weekdays{display:grid;grid-template-columns:repeat(7,1fr);margin-top:8px;}
  .day-name{text-align:center;font-weight:600;font-size:0.9rem;color:#444;}
  .calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin-top:4px;}
  .day{position:relative;background:#fff;border:1px solid #d7d7d7;border-radius:12px;
       height:56px;overflow:hidden;cursor:pointer;}
  .date-num{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
            font-weight:700;font-size:1.2rem;z-index:2;color:#222;pointer-events:none;}
  .paw-mark{
    position:absolute;
    width:14px;
    height:14px;
    pointer-events:none;
  }
  .buttons{display:flex;justify-content:center;gap:10px;margin-top:14px;flex-wrap:wrap;}
  button{background:#333;color:#fff;border:none;border-radius:10px;padding:10px 14px;
         font-size:1rem;cursor:pointer;}
</style>
</head>
<body>

<div id="captureArea">
  <div class="header">
    <img src="LEO.jpg" alt="Leo" />
    <img src="boyz.jpg" alt="Leo & Benny" />
    <img src="BENNY.jpg" alt="Benny" />
  </div>

  <h1>Boyz Calendar</h1>

  <div class="legend">
    <div class="legend-item legend-rp">
      RP
      <div class="legend-paws">
        <svg viewBox="0 0 24 24" fill="#2196F3"><path d="M4 12c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm3-5c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm4 10c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm4-10c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm3 5c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"/></svg>
        <svg viewBox="0 0 24 24" fill="#2196F3"><path d="M4 12c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm3-5c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm4 10c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm4-10c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm3 5c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"/></svg>
      </div>
    </div>
    <div class="legend-item legend-vr">
      VR
      <div class="legend-paws">
        <svg viewBox="0 0 24 24" fill="#9C27B0"><path d="M4 12c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm3-5c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm4 10c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm4-10c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm3 5c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"/></svg>
        <svg viewBox="0 0 24 24" fill="#9C27B0"><path d="M4 12c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm3-5c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm4 10c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm4-10c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm3 5c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"/></svg>
      </div>
    </div>
  </div>

  <div class="summary" id="summary">Days: 0 | Days: 0</div>

  <div class="controls">
    <label for="month">Select Month:</label>
    <input type="month" id="month" />
  </div>

  <div class="weekdays">
    <div class="day-name">Sun</div>
    <div class="day-name">Mon</div>
    <div class="day-name">Tue</div>
    <div class="day-name">Wed</div>
    <div class="day-name">Thu</div>
    <div class="day-name">Fri</div>
    <div class="day-name">Sat</div>
  </div>

  <div id="calendar" class="calendar"></div>
</div>

<div class="buttons">
  <button id="reportBtn">ðŸ“¸ Screenshot Report</button>
  <button id="yearBtn">ðŸ“Š Yearly Report</button>
</div>

<script>
const cal=document.getElementById('calendar');
const monthPicker=document.getElementById('month');
const summary=document.getElementById('summary');
let selected=JSON.parse(localStorage.getItem('boyzData'))||{};
let pawPositions=JSON.parse(localStorage.getItem('pawPos'))||{};
const now=new Date();
monthPicker.value=`${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,'0')}`;
render(new Date(now.getFullYear(), now.getMonth(), 1));

monthPicker.addEventListener('change', e=>{
  const [y,m]=e.target.value.split('-');
  render(new Date(parseInt(y,10), parseInt(m,10)-1, 1));
});

function save(){
  localStorage.setItem('boyzData',JSON.stringify(selected));
  localStorage.setItem('pawPos',JSON.stringify(pawPositions));
}

function generatePositions(){
  const bases=[{top:25,left:30},{top:25,left:70},{top:65,left:30},{top:65,left:70}];
  return bases.map(b=>({
    top: Math.max(10, Math.min(80, b.top + (Math.random()*12 - 6))),
    left: Math.max(10, Math.min(80, b.left + (Math.random()*12 - 6)))
  }));
}

function getPawSVG(color){
  return `<svg viewBox="0 0 24 24" fill="${color}" width="14" height="14">
  <path d="M4 12c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm3-5c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm4 10c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm4-10c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm3 5c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"/>
  </svg>`;
}

function render(date){
  cal.innerHTML='';
  const y=date.getFullYear(), m=date.getMonth();
  const firstDay=new Date(y,m,1).getDay();
  const daysInMonth=new Date(y,m+1,0).getDate();
  for(let i=0;i<firstDay;i++) cal.appendChild(document.createElement('div'));
  let rpCount=0, vrCount=0;

  for(let d=1;d<=daysInMonth;d++){
    const key=`${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
    const cell=document.createElement('div');
    cell.className='day';

    const num=document.createElement('div');
    num.className='date-num';
    num.textContent=d;
    cell.appendChild(num);

    if(selected[key]){
      if(selected[key]==='rp') rpCount++; else vrCount++;
      if(!pawPositions[key]) pawPositions[key]=generatePositions();
      const color = selected[key]==='rp' ? '#2196F3' : '#9C27B0';
      pawPositions[key].forEach(p=>{
        const mark=document.createElement('div');
        mark.className='paw-mark';
        mark.style.top=p.top+'%';
        mark.style.left=p.left+'%';
        mark.innerHTML=getPawSVG(color);
        cell.appendChild(mark);
      });
    }

    cell.addEventListener('click',()=>{
      if(!selected[key]){selected[key]='rp';if(!pawPositions[key]) pawPositions[key]=generatePositions();}
      else if(selected[key]==='rp'){selected[key]='vr';if(!pawPositions[key]) pawPositions[key]=generatePositions();}
      else{delete selected[key];delete pawPositions[key];}
      save(); render(new Date(y,m,1));
    });

    cal.appendChild(cell);
  }

  summary.textContent=`Days: ${rpCount} | Days: ${vrCount}`;
}

document.getElementById('reportBtn').addEventListener('click',()=>{
  html2canvas(document.getElementById('captureArea'),{scale:2,useCORS:true}).then(c=>{
    c.toBlob(b=>{
      const f=new File([b],'boyz_calendar.png',{type:'image/png'});
      if(navigator.share&&navigator.canShare&&navigator.canShare({files:[f]})){
        navigator.share({files:[f],title:'Boyz Calendar'});
      }else{
        const a=document.createElement('a');
        a.href=URL.createObjectURL(b);a.download='boyz_calendar.png';a.click();
      }
    });
  });
});

document.getElementById('yearBtn').addEventListener('click',()=>{
  const totals={};
  for(const k in selected){
    const [y,m]=k.split('-');
    const ym=`${y}-${m}`;
    if(!totals[ym]) totals[ym]={RP:0,VR:0};
    if(selected[k]==='rp') totals[ym].RP++; else totals[ym].VR++;
  }
  let csv='Year,Month,RP,VR\n';
  Object.keys(totals).sort().forEach(ym=>{
    const [yy,mm]=ym.split('-');
    csv+=`${yy},${mm},${totals[ym].RP},${totals[ym].VR}\n`;
  });
  const blob=new Blob([csv],{type:'text/csv'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');
  a.href=url;a.download='boyz_yearly_report.csv';a.click();
  URL.revokeObjectURL(url);
});
</script>
</body>
</html>
